**Собирая Все Это Воедино**  

Из предыдущих модулей вы узнали, что при запросе веб-страницы в браузере происходит множество процессов, которые остаются за кадром.  

Подводя итог, можно сказать, что когда вы запрашиваете веб-сайт, ваш компьютер должен знать IP-адрес сервера, с которым ему нужно связаться. Для этого он использует DNS. Затем ваш компьютер связывается с веб-сервером с помощью специального набора команд, называемого протоколом HTTP. После этого веб-сервер возвращает HTML, JavaScript, CSS, изображения и т. д., которые ваш браузер использует для правильного форматирования и отображения веб-сайта.

Есть ещё несколько компонентов, которые помогают веб-сайту работать эффективнее и предоставляют дополнительные функции.

**Балансировщики нагрузки**

Когда трафик веб-сайта становится достаточно большим или когда на сайте работает приложение, требующее высокой доступности, одного веб-сервера может быть недостаточно. Балансировщики нагрузки выполняют две основные функции: обеспечивают высокую пропускную способность веб-сайтов и обеспечивают аварийное переключение, если сервер перестает отвечать на запросы.

Когда вы обращаетесь к веб-сайту с балансировщиком нагрузки, балансировщик сначала получает ваш запрос, а затем перенаправляет его на один из нескольких серверов, находящихся за ним. Балансировщик нагрузки использует различные алгоритмы, чтобы определить, какой сервер лучше всего подходит для обработки запроса. Вот несколько примеров таких алгоритмов: **циклический перебор**, при котором запрос отправляется на каждый сервер по очереди, или **взвешенный**, при котором проверяется, сколько запросов в данный момент обрабатывается на сервере, и запрос отправляется на наименее загруженный сервер.

Балансировщики нагрузки также периодически проверяют каждый сервер, чтобы убедиться, что он работает корректно. Это называется **проверкой работоспособности**. Если сервер не отвечает должным образом или вообще не отвечает, балансировщик нагрузки прекращает отправку трафика до тех пор, пока сервер снова не начнёт отвечать должным образом.

What does a load balancer perform to make sure a host is still alive? health check
Что делает балансировщик нагрузки, чтобы убедиться, что хост всё ещё работает?

![](https://tryhackme-images.s3.amazonaws.com/user-uploads/5c549500924ec576f953d9fc/room-content/829e340231cd8aa9f5ed2fa5c464ea80.svg)  

**Сети доставки контента (CDN)** Content Delivery Networks

CDN может быть отличным ресурсом для сокращения трафика на загруженный веб-сайт. Это позволяет вам размещать статические файлы с вашего веб-сайта, такие как JavaScript, CSS, изображения, видео, и размещать их на тысячах серверов по всему миру. Когда пользователь запрашивает один из размещенных файлов, CDN вычисляет, где физически расположен ближайший сервер, и отправляет запрос туда, а не потенциально на другой конец света.  

**Базы данных  
**

Часто веб-сайтам требуется способ хранения информации для пользователей. Веб-серверы могут взаимодействовать с базами данных, чтобы сохранять и извлекать из них информацию. Базы данных могут быть самыми разными: от простого текстового файла до сложных кластеров из нескольких серверов, обеспечивающих высокую скорость и отказоустойчивость. Вы столкнётесь с такими распространёнными базами данных, как MySQL, MSSQL, MongoDB, Postgres и другими. У каждой из них есть свои особенности.

**WAF (веб-приложение брандмауэр)**

WAF находится между вашим веб-запросом и веб-сервером; его основная цель - защитить веб-сервер от взлома или атак типа "отказ в обслуживании". Он анализирует веб-запросы на предмет распространенных методов атаки, независимо от того, исходит ли запрос от реального браузера, а не от бота. Он также проверяет, не отправляется ли чрезмерное количество веб-запросов, используя так называемое ограничение скорости, которое разрешает только определенное количество запросов с IP-адреса в секунду. Если запрос будет сочтен потенциальной атакой, он будет удален и никогда не отправится на веб-сервер.

**Как работают веб-серверы.**

**Что такое веб-сервер?  
**

Веб-сервер — это программное обеспечение, которое прослушивает входящие соединения, а затем использует протокол HTTP для доставки веб-контента своим клиентам. Наиболее распространёнными веб-серверами являются Apache, Nginx, IIS и NodeJS. Веб-сервер доставляет файлы из так называемого корневого каталога, который определяется в настройках программного обеспечения. Например, Nginx и Apache используют одно и то же расположение по умолчанию /var/www/html в операционных системах Linux, а IIS использует C:\inetpub\wwwroot в операционных системах Windows. Так, например, если вы запросите файл [http://www.example.com/picture.jpg](http://www.example.com/picture.jpg), он отправит файл /var/www/html/picture.jpg со своего локального жёсткого диска.

**Виртуальные Хосты**

Веб-серверы могут размещать несколько веб-сайтов с разными доменными именами. Для этого они используют виртуальные хосты. Программное обеспечение веб-сервера проверяет имя хоста, указанное в заголовках HTTP, и сопоставляет его с виртуальными хостами (виртуальные хосты — это просто текстовые файлы конфигурации). Если совпадение найдено, открывается нужный веб-сайт. Если совпадения нет, открывается веб-сайт по умолчанию.

Корневой каталог виртуальных хостов может быть сопоставлен с различными областями на жёстком диске. Например, [one.com](http://one.com/) сопоставляется с /var/www/website_one, а [two.com](http://two.com/) — с /var/www/website_two

Количество различных веб-сайтов, которые можно разместить на веб-сервере, не ограничено.

**Статический и динамический контент**

Статический контент, как следует из названия, — это контент, который никогда не меняется. Обычно это изображения, JavaScript, CSS и т. д., но также может быть и HTML-код, который никогда не меняется. Кроме того, это файлы, которые напрямую загружаются с веб-сервера без каких-либо изменений.

Динамический контент, с другой стороны, - это контент, который может меняться в зависимости от различных запросов. Возьмем, к примеру, блог. На главной странице блога вам будут показаны последние записи. Если создается новая запись, домашняя страница обновляется последней записью, или вторым примером может быть страница поиска в блоге. В зависимости от того, по какому слову вы выполняете поиск, будут отображаться разные результаты.

Эти изменения в том, что вы в конечном итоге видите, выполняются в так называемом **бэкэнде** с использованием языков программирования и сценариев. Это называется Серверной частью, потому что все, что делается, делается за кулисами. Вы не можете просмотреть исходный код HTML веб-сайтов и увидеть, что происходит в серверной части, в то время как HTML является результатом обработки из серверной части. Все, что вы видите в своем браузере, называется **интерфейсом.**

**Языки программирования и бэкенд-языки**

Возможности бэкенд-языков практически безграничны, и именно они делают веб-сайт интерактивным для пользователя. Вот несколько примеров таких языков (в произвольном порядке :p): PHP, Python, Ruby, NodeJS, Perl и многие другие. Эти языки могут взаимодействовать с базами данных, вызывать внешние сервисы, обрабатывать данные, поступающие от пользователя, и многое другое. Самый простой пример на PHP — если вы запросите веб-сайт [http://example.com/index.php?name=adam](http://example.com/index.php?name=adam)  
[  
](http://example.com/index.php?name=adam)

Если бы index.php был создан таким образом:  

`<html><body>Hello <?php echo $_GET["name"]; ?></body></html>`

Он бы вывел на экран следующее:

`<html><body>Hello adam</body></html>`

Вы заметите, что клиент не видит PHP-код, потому что он находится на бэкенде. Такая интерактивность создаёт гораздо больше проблем с безопасностью для веб-приложений, которые не были созданы с учётом требований безопасности, как вы узнаете из следующих модулей.